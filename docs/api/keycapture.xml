<?xml version = "1.0"?>

<API>
    <MODULE name="KeyCapture" parent="Rho" license="Required">
        <HELP_OVERVIEW>The KeyCapture module is used to intercept or override hardware keys</HELP_OVERVIEW>
        <MORE_HELP>.</MORE_HELP>
    
        <TEMPLATES>
        </TEMPLATES>
			
		<!--  TODO: When adding platforms other than WM, expand the PLATFORM Tags -->	
		<CONSTANTS>
            <CONSTANT name="IPHONE_VOLUME_UP" value="10">
                <DESC>iPhone volume up keyCode</DESC>
            </CONSTANT>
            <CONSTANT name="IPHONE_VOLUME_DOWN" value="11">
                <DESC>iPhone volume down keyCode</DESC>
            </CONSTANT>
		</CONSTANTS>	
			
		<PROPERTIES access="STATIC">
			<PROPERTY name="homeKeyValue" type="STRING" default="Disabled" generateAccessors="true">
				<DESC>Specifies a key which, when pressed, will navigate to the start page as defined in the RhoElements configuration. Set to 'Disabled' to prevent this behavior.</DESC>
				<PLATFORM>WM</PLATFORM>
			</PROPERTY>
		</PROPERTIES>

		<METHODS access="STATIC">
            <METHOD name="captureKey" hasCallback="optional" runInThread="ui">
                <DESC>todo.  If don't specify a callback then the value will be cleared - also add a return section.  </DESC>
				<PLATFORM>iOS, WM, Android</PLATFORM>
				<PARAMS>
					<PARAM name="dispatch" type="BOOLEAN">
						<DESC>todo</DESC>
					</PARAM>
					<PARAM name="keyValue" type="STRING">
						<DESC>todo - (string.  Accept keys specified in hex or ALL).  Has to be a string for backwards compatibility.  Must be the numeric representation of that key, for hardware reasons. - use all keys to determine which key it is.</DESC>
					</PARAM>
				</PARAMS>
				<CALLBACK  type="HASH">
					<PARAMS>
						<PARAM name="keyValue" type="INTEGER">
							<DESC>todo</DESC>
							<PLATFORM>WM, Android</PLATFORM>
						</PARAM>
					</PARAMS>
				</CALLBACK>    
            </METHOD>

            <METHOD name="remapKey" hasCallback="none" runInThread="ui">
                <DESC>Captures and consumes a specific key value and spawns a new key event with the remapped key code. If remapTo is empty or null, the remapping for this key value will be cleared</DESC>
				<PLATFORM>WM, Android</PLATFORM>
				<PARAMS>
					<PARAM name="keyValue" type="STRING">
						<DESC>todo - (string.  Accept keys specified in hex NOT ALL)</DESC>
					</PARAM>
					<PARAM name="remapTo" type="STRING">
						<DESC>todo - (string.  Accept keys specified in hex NOT ALL)</DESC>
					</PARAM>
				</PARAMS>
            </METHOD>

            <METHOD name="captureTrigger" hasCallback="optional" runInThread="ui">
                <DESC>todo.  If don't specify a callback then the value will be cleared - also add a return section</DESC>
				<PLATFORM>WM, Android</PLATFORM>
				<APPLIES msiOnly="true"></APPLIES>
				<CALLBACK  type="HASH">
					<PARAMS>
						<PARAM name="triggerFlag" type="INTEGER">
							<DESC>todo</DESC>
						</PARAM>
					</PARAMS>
				</CALLBACK>    
            </METHOD>

		</METHODS>
        
        <VER_INTRODUCED>1.0.0</VER_INTRODUCED>
        <PLATFORM>WM, Android</PLATFORM>
        <EXAMPLES>
            <EXAMPLE title="TODO - ADD EXAMPLES - THERE ARE LOTS IN THE RE1 HELP FILE">
                <SECTIONS>
					<SECTION>
					<DESC>
						If you just want to display the keystate indicators in their default positions with size 25x25 pixels then call as follows
					</DESC>
					<CODE lang='ruby'>
				<![CDATA[
	  def show_keystates
		Rho::Keystate.showStates({width:25;height:25})
	  end
						]]>
					</CODE>
					</SECTION>
                </SECTIONS>
            </EXAMPLE>			
        </EXAMPLES>
        <REMARKS>
            <REMARK title="Precedence of APIs using the same keyValue">
                <DESC>
					If captureKey and remapKey have been called with the same keyValue, the remapKey will take precedence. In this case this means that the keyEvent for the inputted key will not be fired as the remapping will occur and consume the key event.
                </DESC>
            </REMARK>
			<REMARK title="Precedence of captureKey events">
                <DESC>
					If captureKey has been called with an 'all' value, only the captureKey callback associated with 'all' will be fired on a key press.
                </DESC>
            </REMARK>
            <REMARK title="TODO - ENSURE ALL OTHER REMARKS FROM RE1 HELP FILE ARE CAPTURED">
                <DESC>
                    <![CDATA[
                    To do
                ]]>

                </DESC>
            </REMARK>
		</REMARKS>
	</MODULE>
</API>    