Apigee for Twitter
===========
Apigee makes working with APIs better, especially the Twitter API. By accessing the Twitter API through Apigee, you can receive significantly improved Twitter API rate limits when using OAuth authentication. This removes a major barrier for developers building Twitter applications - with the Apigee add-on, you can now handle more requests and traffic than ever before and build a better app. In upcoming versions, you will also be able to get Apigee's full Analytics and Debugging features to see API performance metrics, understand usage, view requests and responses and dig into errors.
 
Add-on Installation
-------------------
To use (add-on) on Heroku, install the Apigee add-on:

    :::term
    $ heroku addons:add apigee

Local setup
-----------
Activating the add-on will create two private Twitter API endpoints for you as configvars. To use Apigee, simply make any normal request to api.twitter.com or search.twitter.com, but instead use the configvar _APIGEE_TWITTER_API_ENDPOINT_ in place of api.twitter.com and _APIGEE_TWITTER_SEARCH_API_ENDPOINT_ in place of search.twitter.com. 

Using OAuth with Apigee
-----------
In order to use OAuth with Apigee, there are two important steps to keep in mind:

1. All API requests are made through Apigee, **except for the OAuth dance**
2. API requests must be signed as if they are going directly to Twitter (using _http://api.twitter.com_ in the base string) but then sent through your Apigee endpoint.

After you activate the add-on, Apigee will create a private endpoint for your API requests. You can continue to request user tokens as you have before, and likewise, you would continue to build the base string with _http://api.twitter.com_ . But instead of sending those requests directly to _http://api.twitter.com_ , you instead send them to your configvar, e.g. _http://APIGEE_TWITTER_API_ENDPOINT_ instead.

Note: the [Twitter Gem](http://rubygems.org/gems/twitter) supports the OAuth flow through Apigee natively. A brief example:

    :::ruby
    # build the endpoint based on the add-on supplied configvar
    @endpoint = 'http://'+ENV['APIGEE_TWITTER_API_ENDPOINT']
    
    # initialize with sample variables
    ctoken = 'your_consumer_token'
    csecret = 'your_consumer_secret'
    atoken, asecret = ["14142354-mykey", "mysecret"]

    oauth = Twitter::OAuth.new(ctoken, csecret, :api_endpoint => @endpoint)
    oauth.authorize_from_access(atoken, asecret)
    client = Twitter::Base.new(oauth)
    @user = client.user('heroku') # calls user/show on @heroku via Apigee

A Note on Search
-----------
The Twitter REST API appears to support all search methods from search.twitter.com. Developers may discover rate limiting benefits by directing authenticated requests to the REST API endpoint (though it is unclear how well supported this may be).

Additional Resources
-----------
* [Apigee.com](http://apigee.com)
* [Support community](http://support.apigee.com)
* Apigee is designed to be a [highly available service](http://apigee.com/blog_detail/on_availability)