<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
			<meta charset="utf-8">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<title>Enterprise Browser</title>
			<meta name="viewport" content="width=device-width, initial-scale=1">
			<meta name="description" content="">
			<link rel="shortcut icon" href="images/favicon.ico" >
			<link rel="stylesheet" href="bootstrap-3.1.1-dist/css/bootstrap.min.css" media="screen">
			<link rel="stylesheet" href="MultiLevelPushMenu_v2.1.4/jquery.multilevelpushmenu_grey.css">
			<link rel="stylesheet" href="font-awesome-4.1.0/css/font-awesome.min.css">
			<link rel="stylesheet" href="jquery.tocify.js-master/libs/jquery.ui.all.css" rel="stylesheet">
			<link rel="stylesheet" href="jquery.tocify.js-master/src/stylesheets/jquery.tocify.css" rel="stylesheet">
			<link type="text/css" rel="stylesheet" href="css/prettify.css"/>
			<link rel="stylesheet" href="css/docs.css">
			<link rel="stylesheet" href="css/bootstrap-table.min.css">
			<link rel="stylesheet" href="css/bootstrap-multiselect.css" type="text/css"/>

			<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
			<script type="text/javascript" src="js/Markdown.Converter.js"></script>
			<script type="text/javascript" src="js/jquery.highlight.js"></script>
			<script type="text/javascript" src="js/fuse.js"></script>
			<script type="text/javascript" src="docs/versions.js"></script>
			<script type="text/javascript" src="docs/docs.js"></script>
			<script type="text/javascript" src="docs/matrix.js"></script>
			<script type="text/javascript" src="docs/menu.js"></script>
			<script type="text/javascript" src="bootstrap-3.1.1-dist/js/bootstrap.min.js"></script>
			<script type="text/javascript" src="MultiLevelPushMenu_v2.1.4/jquery.multilevelpushmenu.js"></script>
			<script type="text/javascript" src="js/modernizr.min.js"></script>
			<script type="text/javascript" src="jquery.tocify.js-master/libs/jquery-ui-1.9.1.custom.min.js"></script>
			<script type="text/javascript" src="jquery.tocify.js-master/src/javascripts/jquery.tocify.js"></script>
			<script type="text/javascript" src="js/prettify.js"></script>
			<script type="text/javascript" src="js/docs.js"></script>
			<script src="js/bootstrap-table.min.js"></script>
			<script type="text/javascript" src="js/bootstrap-multiselect.js"></script>

			<script>
				// Using the versions.js file to make the versions change programmatically
				ebVersion = "Enterprise Browser " + versionsList.version;
				window.document.title = ebVersion;
			</script>
<script type="text/javascript">


var lookups = {
	engines: {
		cluttered: [],
		unique: []
	},
	os: {
		cluttered: [],
		unique: []
	},
	devices: {
		cluttered: [],
		unique: []
	}
};




function pushArray(obj,ar)
{
	for (var i = 0; i < ar.length; i++) {
		obj.push(ar[i]);
	};
}

function arrayContains(match, search){
	// console.log("checking match")
	// console.log(match);
	// console.log(search);
	var found=false;
	if(match != null)
	{
		for (var i = 0; i < match.length; i++) {
			if($.inArray(match[i],search)>-1){
				found=true;
			}
		};
	}
	// console.log(found)
	return found;
}

function sameArray(arr1,arr2){
	if($(arr1).not(arr2).length == 0 && $(arr2).not(arr1).length == 0)
		return true
	else
		return false
}

function getFilteredMatrix(){
	var newMatrix = [];
	// console.log($('#devices').val())
	if($('#engines').val()==null && $('#os').val()==null)
	{
		newMatrix = matrix;
	}
		else
		{
		for (var i = 0; i < matrix.length; i++) {
			// console.log(matrix[i].api);
			var found = {
				os: false,
				engines: false
			};
			
			if(arrayContains($('#engines').val(),matrix[i].engines.split(','))){
				found.engines=true;
				// console.log('Found Engine');
			}
			if(arrayContains($('#os').val(),matrix[i].os.split(','))){
				found.os=true;
				// console.log('Found OS');
			}
			
			// console.log(found);
			if(($('#condition').html() =='All') && (found.os && found.engines)){
				newMatrix.push(matrix[i]);
			}
			if(($('#condition').html() =='Any') && (found.os || found.engines)){
				newMatrix.push(matrix[i]);
			}
		};

	}
	$('#table').bootstrapTable("load",newMatrix);
	return newMatrix;
}

function displayMatrix() {

        for (var i = 0; i < matrix.length; i++) {
        	pushArray(lookups.engines.cluttered,matrix[i].engines.split(','));
        	pushArray(lookups.os.cluttered,matrix[i].os.split(','));
        };
        lookups.engines.unique = $.unique(lookups.engines.cluttered).sort();
        lookups.os.unique = $.unique(lookups.os.cluttered).sort();
        
		$.each(lookups.os.unique, function(key, value) {   
		     $('#os')
		         .append($("<option selected></option>")
		         .attr("value",value)
		         .text(value)); 
		});
		$.each(lookups.engines.unique, function(key, value) {   
		     $('#engines')
		         .append($("<option selected></option>")
		         .attr("value",value)
		         .text(value)); 
		});

        $('#os').multiselect({
            includeSelectAllOption: true,
            allSelectedText: 'All Operating Systems',
            nonSelectedText: 'Select Operating Systems',
            onChange: function(option, checked, select) {
               getFilteredMatrix();
            }
        });        
        $('#engines').multiselect({
            includeSelectAllOption: true,
            allSelectedText: 'All Engines',
            nonSelectedText: 'Select Engines',
            onChange: function(option, checked, select) {
               getFilteredMatrix();
            }
        });  

      $('#table').bootstrapTable({
        data: matrix
    	});  

    	$('#btnFilter').click(function(){
    		if($('#condition').html() =='All')
    			$('#condition').html('Any');
    		else
    			$('#condition').html('All');
    		getFilteredMatrix();
    	})    
    };
</script>



    </head>
    <body>
			<!--[if lt IE 7]>
				<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
			<![endif]-->
			<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
						</div>
						<div class="modal-body">
							<div id="modalImg"></div>
						</div>
					</div>
				</div>
			</div>

			<div id="docsHeader">
				<div id="headerText">
					<img src="images/logo.png"><a id='banner' href="#">Enterprise Browser</a>
				</div>
				<div id="versions" data-placement="bottom" data-html="true" data-original-title="Versions" >
					<i class="fa fa-code-fork"></i>
				</div>
				<input type="text" id="searchBox" class="form-control fixed-width-270" placeholder="Search" data-placement="bottom" data-html="true" data-original-title=" Search Results &nbsp;<i class='pull-right cursorPointer fa fa-minus-square'></i>" data-trigger="manual">
			</div>

			<div id="pushobj">
				<div id="markdownDoc" >
				</div>
				<div id="matrix">


				</div>
			</div>
      <div id="menu"></div>

			<script>
				banner.innerHTML = ebVersion;

				!function ($) {
					$(function(){
						window.prettyPrint && prettyPrint()
					})
					}(window.jQuery)
			</script>
    </body>
</html>