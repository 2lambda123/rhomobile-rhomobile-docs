<div class='tableofcontents'> </div><h1>Gesture API Tutorial</h1>

<p>This tutorial covers the use of the Enterprise Browser Gesture API for recognizing touch screen gestures.</p>

<h2>Prerequisites</h2>

<p>The following are required to complete this tutorial:</p>

<ul>
<li>A background in HTML, CSS and JavaScript coding</li>
<li>Enterprise Browser installed on a development PC</li>
<li>A Zebra mobile device and USB cable</li>
<li>Enterprise Browser installed on the Zebra device</li>
</ul>


<h2>Coding for the Gesture API</h2>

<p>Enterprise Browser includes an API for recognizing touch screen gestures. The steps shown below are typical for code that uses this API. The following tutorial will walk through creating a working example application using these steps.</p>

<p><img src="http://ebzebra.github.io/docs/1.4/images/eb_tutorials/Gesture_API_tutorial_01.png" alt="img" /></p>

<p>The resulting example application looks like this:</p>

<p><img src="http://ebzebra.github.io/docs/1.4/images/eb_tutorials/Gesture_API_tutorial_02.png" alt="img" /></p>

<h2>Creating the App</h2>

<p>The following HTML template will be used as a starting point for this tutorial. It includes the following features:</p>

<ul>
<li>Home button that returns the user to the Enterprise Browser start page</li>
<li>Quit button that exits Enterprise Browser</li>
<li>Styling to size components in an appropriate manner for use on a device</li>
</ul>


<p>HTML Starter Template:</p>

<pre name="code" class="HTML">&lt;HTML&gt;
    &lt;HEAD&gt;
        &lt;script type="text/javascript" charset="utf-8" src="./ebapi-modules.js"&gt;&lt;/script&gt;
        &lt;style&gt;
        h1{font-size:2.5em;background-color:gray;margin:5px;padding:5px;}
        button{font-size:.5em;}
        input{font-size:1.3em;}
        #status{position:fixed; bottom:0px;}
        &lt;/style&gt;
    &lt;/HEAD&gt;
    &lt;BODY&gt;
        &lt;h1&gt;Gestures
        &lt;button onclick="window.location.href='./index.html'"&gt;Home&lt;/button&gt;
        &lt;button onclick="EB.Application.quit();"&gt;Quit&lt;/button&gt;
        &lt;/h1&gt;
        &lt;div id=controls &gt;
        &lt;/div&gt;
        &lt;span id=status&gt;Gestures Disabled&lt;/span&gt;
     &lt;/BODY&gt;
&lt;SCRIPT&gt;
&lt;/SCRIPT&gt;
&lt;/HTML&gt;
</pre>

<h3>STEP 1: Create the application file</h3>

<ul>
<li><p><strong>Create a directory</strong> on your development machine for application files.</p></li>
<li><p><strong>Copy <code>ebapi-modules.js</code> from C:\EnterpriseBrowser\JavaScriptFiles\EnterpriseBrowser to your application directory</strong>. The Quit button relies on code in this JavaScript file.</p></li>
<li><p><strong>Create a file named <code>gesture.html</code></strong> in your application directory and open it in a text editor. Make sure the file doesn&rsquo;t have an invisible &lsquo;.txt&rsquo; extension.</p></li>
<li><p><strong>Copy and paste the contents of the starter template above into the file</strong> and save it.</p></li>
</ul>


<h3>STEP 2: Add input field and control buttons</h3>

<p>The Gesture app will have three buttons: one to enable gestures, a second to enable gestures with diagnostics and the third to disable gestures. We&rsquo;ll append these two lines of code in a later step. For now:</p>

<ul>
<li><strong>Add three input buttons to the <code>controls div</code> section</strong> of the <code>gesture.html</code> file you just created:</li>
</ul>


<p>Sample HTML:</p>

<pre name="code" class="HTML">&lt;input type=button value="Enable" &gt;
&lt;input type=button value="Enable with Diagnostics" &gt;
&lt;input type=button value="Disable" &gt;
</pre>

<h3>STEP 3: Include the API JavaScript file</h3>

<ul>
<li><strong>Copy the <code>elements.js</code> file</strong> from C:\EnterpriseBrowser\JavaScriptFiles\BackwardCompatibility to your application directory. The Gesture API requires this JavaScript file.</li>
</ul>


<p>To include this JavaScript file in your app,</p>

<ul>
<li><strong>Add the following to <code>gesture.html</code></strong> as the first line in the HEAD section:</li>
</ul>


<p>Sample HTML:</p>

<pre name="code" class="HTML">&lt;script type="text/javascript" charset="utf-8" src="./elements.js"&gt;&lt;/script&gt;
</pre>

<h3>STEP 4: Define and create gestures</h3>

<ul>
<li><strong>Add the following method to the SCRIPT section</strong> of <code>gesture html</code>:</li>
</ul>


<p>Sample JavaScript:</p>

<pre name="code" class="JavaScript">function fnGestureEnable(diagsOn) {
    gesture.type = "linear";
    gesture.id = "swipe-right";
    gesture.diagnostics = diagsOn; 
    gesture.create();

    gesture.type = "linear";
    gesture.preset = "right-left";
    gesture.id = "swipe-left";
    gesture.diagnostics = diagsOn; 
    gesture.create();

    gesture.type = "hold";
    gesture.id = "press";
    gesture.centerX = 350;
    gesture.centerY = 200;
    gesture.radius = 200;
    gesture.delay = 500;
    gesture.interval = 0;
    gesture.diagnostics = diagsOn; 
    gesture.create();

    gesture.type = "circle";
    gesture.preset = "happy";
    gesture.id = "happy-circle";
    gesture.diagnostics = diagsOn; 
    gesture.create();

    gesture.detected = "fnGestureDetected(%json)";
    var diagsTag = (diagsOn)?"With Diagnostics":""
      document.getElementById("status").innerHTML = "Gestures Enabled " + diagsTag;
}
</pre>

<p>Gestures are created by setting several attributes and then executing <code>gesture.create()</code>. Four gestures are created in the first four sections of the code. The diagnostics attribute being set for each gesture is used to turn on visual feedback for testing purposes. Toward the end on the line that starts &ldquo;gesture.detected = &hellip;&rdquo; we assign a method to be called whenever a gesture is detected. The final two lines display a status message to let the user know that gestures have been enabled.</p>

<blockquote><p>NOTE: For more details about defining gestures, please refer to the <a href="https://developer.motorolasolutions.com/docs/DOC-2524">Enterprise Browser Gesture API documentation</a>.</p></blockquote>

<h3>STEP 5: Respond to gestures</h3>

<p>The gesture handler in the previous method was set to <code>fnGestureDetected()</code>.</p>

<ul>
<li><strong>Add the <code>fnGestureDetected()</code> method to the end of the SCRIPT section</strong>.</li>
</ul>


<p>Sample JavaScript:</p>

<pre name="code" class="JavaScript">function fnGestureDetected (jsGesture) { 
    alert ("Gesture Detected: " + jsGesture.id);
}
</pre>

<p>Data is passed to the callback function in the form of a JSON object. The id of the gesture that was detected is one of the values passed. The code above posts an alert with the id of the detected gesture. In a production application, you might use the callback to initiate navigation.</p>

<h3>STEP 6: Delete gestures</h3>

<p>Next we&rsquo;ll add a means to delete any active gestures.</p>

<ul>
<li><strong>Add the method <code>fnGestureDisable()</code></strong> to the end of the SCRIPT section:</li>
</ul>


<p>Sample JavaScript:</p>

<pre name="code" class="JavaScript">function fnGestureDisable() {
    gesture.id = "swipe-right";  gesture.delete();
    gesture.id = "swipe-left";   gesture.delete();
    gesture.id = "press";        gesture.delete();
    gesture.id = "happy-circle"; gesture.delete();
    document.getElementById("status").innerHTML = "Gestures Disabled ";
}
</pre>

<p>When this function is called, it sets and then deletes the current gesture once for each of the gestures that were previously created. The last line displays a text indicator to the user.</p>

<h3>STEP 7: Hook JavaScript methods to buttons</h3>

<p>Now that the JavaScript functions have been created, we can hook them to the control buttons.</p>

<ul>
<li><strong>In <code>gesture.html</code>, append <code>onClick</code> handler code to the input button tags</strong> we created earlier (or simply replace the buttons created earlier with the function-appended button code below):</li>
</ul>


<p>Sample JavaScript:</p>

<pre name="code" class="JavaScript">&lt;input type=button value="Enable" onClick="fnGestureEnable(false);"&gt;
&lt;input type=button value="Enable with Diagnostics" onClick="fnGestureEnable(true);"&gt;
&lt;input type=button value="Disable" onClick="fnGestureDisable();"&gt;
</pre>

<h3>STEP 8: Copy files to the device</h3>

<p>To test the application, you need to copy the application files to the device and set the StartPage setting in the Enterprise Browser <code>config.xml</code> file. Android- and Windows-based devices use different methods for transferring files. Please see the documentation for your device for specific instructions on copying files.</p>

<p>In general, here&rsquo;s what is required:</p>

<ol>
<li><strong>Create a directory on your device</strong> for the Gesture application. Make sure the directory is in an unrestricted location to avoid any permissions issues when Enterprise Browser tries to open the files. We&rsquo;ll place our sample app&rsquo;s files in the device&rsquo;s root directory and show you how to modify the <code>config.xml</code> file accordingly.</li>
<li><strong>Copy the <code>gesture.html</code> and any JavaScript API files</strong> you have included to the directory you created on the device.</li>
<li><strong>Copy the <code>config.xml</code> file to a suitable location on the development machine</strong> from the Enterprise Browser install directory on the device and open it in a text editor.</li>
<li><strong>Update the StartPage setting in <code>config.xml</code> to point to the location on the device</strong> where you placed <code>gesture.html</code> and save the changes.</li>
<li><strong>Copy the <code>config.xml</code> file back to its original location on the device</strong>.</li>
</ol>


<p>Sample <code>config.xml</code> showing path to Android app in root directory:</p>

<pre name="code" class="HTML">    &lt;General&gt;
        &lt;Name value="Gesture"/&gt;
        &lt;StartPage value="file:///gesture.html" name="Gesture"/&gt;
        &lt;UseRegularExpressions value="1"/&gt;
    &lt;/General&gt;
</pre>

<h3>STEP 9: Testing the App</h3>

<ul>
<li><strong>Tap the Enterprise Browser icon</strong> on the device. If the device is not yet licensed for Enterprise Browser you will see the following screen:</li>
</ul>


<p><img src="http://ebzebra.github.io/docs/1.4/images/eb_tutorials/Gesture_API_tutorial_03.png" alt="img" /></p>

<ul>
<li><strong>Click on the cancel button</strong> in the upper right hand corner of the screen to dismiss the message and open the Gesture app. If you turn the device sideways it should look like this:</li>
</ul>


<p><img src="http://ebzebra.github.io/docs/1.4/images/eb_tutorials/Gesture_API_tutorial_04.png" alt="img" /></p>

<ul>
<li><strong>Click on the Enable button</strong>. The status in the lower left hand corner changes to &ldquo;Gestures Enabled&rdquo;. Now try swiping your finger from left to right across the middle of the screen. The callback function will be activated and you will see an alert dialog displaying the detected &ldquo;swipe-right&rdquo; gesture.</li>
</ul>


<p><img src="http://ebzebra.github.io/docs/1.4/images/eb_tutorials/Gesture_API_tutorial_05.png" alt="img" /></p>

<ul>
<li><strong>Click OK to dismiss</strong> the alert. Then, <strong>press and hold a point near the center of the screen</strong>. The callback function will be activated and you will see an alert dialog displaying the detected &ldquo;swipe-right&rdquo; gesture.</li>
</ul>


<p><img src="http://ebzebra.github.io/docs/1.4/images/eb_tutorials/Gesture_API_tutorial_06.png" alt="img" /></p>

<ul>
<li><p><strong>Click the Disable button</strong>. You will see the status text in the lower left hand corner change to &ldquo;Gestures Disabled.&rdquo;</p></li>
<li><p><strong>Click the Enable with Diagnostics button</strong>. The status will change and the screen will be overlaid with images that display the active gesture areas and paths.</p></li>
</ul>


<p><img src="http://ebzebra.github.io/docs/1.4/images/eb_tutorials/Gesture_API_tutorial_07.png" alt="img" /></p>

<ul>
<li><strong>Try slowly tracing the semicircular path with your finger</strong>. The Happy-Circle gesture should be detected.</li>
</ul>


<p><img src="http://ebzebra.github.io/docs/1.4/images/eb_tutorials/Gesture_API_tutorial_08.png" alt="img" /></p>

<h3>Conclusion</h3>

<p>This completes the Enterprise Browser Gesture API tutorial. For more information on the Gesture API, please refer to the <a href="https://developer.motorolasolutions.com/docs/DOC-2524">Enterprise Browser Gesture API documentation</a>.</p>
