<div class='tableofcontents'> </div><h1>Push</h1>

<h2>Overview</h2>

<p>The Push API provides access to Push messaging functionality</p>


<p>Use this API to give your application the ability to receive server initiated messages.</p>




<h2>Enabling the API</h2>




<p>In order to use this API you must include the following extension in your <code>build.yml</code>:</p>




<p>For APNS or GCM:</p>




<pre><code>:::ruby
capabilities: ["push"]
</code></pre>




<p>For RhoConnect Push Service:</p>




<pre><code>:::ruby
extensions: ["rhoconnect-push", "rhoconnect-client"]
For Win32(XPE) MSMQ(Microsoft Message Queue) and .Net Framework 3.5 must be installed on device to get it work.
</code></pre>




<h2>JavaScript Usage</h2>




<p>Be sure to review the <a href="/guide/api_js">JavaScript API Usage</a> guide for important information about using this API in JavaScript.</p>




<h2>Ruby Usage</h2>




<p>Be sure to review the <a href="/guide/api_ruby">Ruby API Usage</a> guide for important information about using this API in Ruby.</p>


<h2>Methods</h2>

<h3>enumerate()</h3>

<p>Returns the push API objects configured within the application.</p>

<h4>Parameters</h4>

<ul><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Callback</h4>

<p>Async Callback Returning Parameters: <span class='text-info'>ARRAY</span></p><ul><ul><li><i>Object</i> : <span class='text-info'>SELF_INSTANCE: Process</span><p> </p></li></ul></ul></p>

<h4>Returns</h4>

<p>Synchronous Return:<ul><li>ARRAY :
Array of available push engines.<ul><li><i>Object</i> : <span class='text-info'>SELF_INSTANCE: Process</span><p> </p></li></ul></li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-book"></i>Class Method: This method can only be accessed via the API class object. <ul><li><code>Rho.Push.enumerate()</code> </li></ul></li></ul>


<h3>getAllProperties()</h3>

<p>This method will return all of object/value pairs for the propertyNames of the API class.</p>

<h4>Parameters</h4>

<ul><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Callback</h4>

<p>Async Callback Returning Parameters: <span class='text-info'>HASH</span></p><ul><ul><li> : <span class='text-info'>STRING</span><p> </p></li></ul></ul></p>

<h4>Returns</h4>

<p>Synchronous Return:<ul><li>HASH :
Map of all available properties<ul><li> : <span class='text-info'>STRING</span><p> </p></li></ul></li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-file"></i>Instance Method: This method can be accessed via an instance object of this class: <ul><li><code>myObject.getAllProperties()</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This method can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.getAllProperties()</code> </li></ul></li></ul>


<h3>getDefault()</h3>

<p>This method will return an object that represents the default instance of the API Class. For example Camera.getDefault will return a Camera object that represents the default camera.</p>

<h4>Parameters</h4>

<ul><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Callback</h4>

<p>Async Callback Returning Parameters: <span class='text-info'>SELF_INSTANCE</span></p><ul></ul></p>

<h4>Returns</h4>

<p>Synchronous Return:<ul><li>SELF_INSTANCE :
Default object of Module.</li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-book"></i>Class Method: This method can only be accessed via the API class object. <ul><li><code>Rho.Push.getDefault()</code> </li></ul></li></ul>


<h3>getDeviceId()</h3>

<p>Returns push token used to identify particular device.</p>

<h4>Parameters</h4>

<ul><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Callback</h4>

<p>Async Callback Returning Parameters: <span class='text-info'>STRING</span></p><ul></ul></p>

<h4>Returns</h4>

<p>Synchronous Return:<ul><li>STRING</li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-file"></i>Instance Method: This method can be accessed via an instance object of this class: <ul><li><code>myObject.getDeviceId()</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This method can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.getDeviceId()</code> </li></ul></li></ul>


<h3>getProperties(<span class="text-info">ARRAY</span> arrayofNames)</h3>

<p>This method will return a set of object/value pairs for the list of the propertyName that is passed in. The propertyNames must be a valid property of the API class.</p>

<h4>Parameters</h4>

<ul><li>arrayofNames : <span class='text-info'>ARRAY</span><p>
List of properties I want to know about </p></li><ul><li><i>Object</i> : <span class='text-info'>STRING</span><p> </p></li></ul><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Callback</h4>

<p>Async Callback Returning Parameters: <span class='text-info'>HASH</span></p><ul><ul><li> : <span class='text-info'>STRING</span><p> </p></li></ul></ul></p>

<h4>Returns</h4>

<p>Synchronous Return:<ul><li>HASH :
Map of properties I want to know about<ul><li> : <span class='text-info'>STRING</span><p> </p></li></ul></li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-file"></i>Instance Method: This method can be accessed via an instance object of this class: <ul><li><code>myObject.getProperties(<span class="text-info">ARRAY</span> arrayofNames)</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This method can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.getProperties(<span class="text-info">ARRAY</span> arrayofNames)</code> </li></ul></li></ul>


<h3>getProperty(<span class="text-info">STRING</span> propertyName)</h3>

<p>This method will return the value of the propertyName that is passed in. The propertyName must be a valid property of the API class.</p>

<h4>Parameters</h4>

<ul><li>propertyName : <span class='text-info'>STRING</span><p>
The property to return info about. </p></li><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Callback</h4>

<p>Async Callback Returning Parameters: <span class='text-info'>STRING</span></p><ul></ul></p>

<h4>Returns</h4>

<p>Synchronous Return:<ul><li>STRING :
The property to return info about.</li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-file"></i>Instance Method: This method can be accessed via an instance object of this class: <ul><li><code>myObject.getProperty(<span class="text-info">STRING</span> propertyName)</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This method can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.getProperty(<span class="text-info">STRING</span> propertyName)</code> </li></ul></li></ul>


<h3>setDefault(<span class="text-info">SELF_INSTANCE: Rho.Push</span> defaultInstance)</h3>

<p>This method allows you to set the attributes of the default object instance by passing in an object of the same class.</p>

<h4>Parameters</h4>

<ul><li>defaultInstance : <span class='text-info'>SELF_INSTANCE: Rho.Push</span><p>
An instance object that is of the same class. </p></li><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Returns</h4>

<p>Synchronous Return:<ul><li>Void</li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-book"></i>Class Method: This method can only be accessed via the API class object. <ul><li><code>Rho.Push.setDefault(<span class="text-info">SELF_INSTANCE: Rho.Push</span> defaultInstance)</code> </li></ul></li></ul>


<h3>setProperties(<span class="text-info">HASH</span> propertyMap)</h3>

<p>This method will set the values of a list of properties for the API class. The propertyName must be a valid property for the class and must also not be read only.</p>

<h4>Parameters</h4>

<ul><li>propertyMap : <span class='text-info'>HASH</span><p>
Map of properties I want to set </p></li><ul><li><i>Object</i> : <span class='text-info'>STRING</span><p> </p></li></ul><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Returns</h4>

<p>Synchronous Return:<ul><li>Void</li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-file"></i>Instance Method: This method can be accessed via an instance object of this class: <ul><li><code>myObject.setProperties(<span class="text-info">HASH</span> propertyMap)</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This method can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.setProperties(<span class="text-info">HASH</span> propertyMap)</code> </li></ul></li></ul>


<h3>setProperty(<span class="text-info">STRING</span> propertyName, <span class="text-info">STRING</span> propertyValue)</h3>

<p>This method will set the value of a property for the API class. The propertyName must be a valid property for the class and must also not be read only.</p>

<h4>Parameters</h4>

<ul><li>propertyName : <span class='text-info'>STRING</span><p>
The one property name that I want to set </p></li><li>propertyValue : <span class='text-info'>STRING</span><p>
The one property value that I want to set </p></li><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Returns</h4>

<p>Synchronous Return:<ul><li>Void</li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-file"></i>Instance Method: This method can be accessed via an instance object of this class: <ul><li><code>myObject.setProperty(<span class="text-info">STRING</span> propertyName, <span class="text-info">STRING</span> propertyValue)</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This method can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.setProperty(<span class="text-info">STRING</span> propertyName, <span class="text-info">STRING</span> propertyValue)</code> </li></ul></li></ul>


<h3>startNotifications()</h3>

<p>Start listening for push messages, errors or other push related events.</p>

<h4>Parameters</h4>

<ul><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Callback</h4>

<p>Async Callback Returning Parameters: <span class='text-info'>HASH</span></p><ul><ul><li>doSync : <span class='text-info'>STRING</span><p>
List of sources to sync separated by comma or &lsquo;all&rsquo;. </p></li><li>alertText : <span class='text-info'>STRING</span><p>
Alert message to show to user. </p></li><li>vibrateDuration : <span class='text-info'>INTEGER</span><p>
Vibrate duration in milliseconds. </p></li><li>alertSound : <span class='text-info'>STRING</span><p>
Path to sound file to play when push message is received. </p></li></ul></ul></p>

<h4>Returns</h4>

<p>Synchronous Return:<ul><li>Void</li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-file"></i>Instance Method: This method can be accessed via an instance object of this class: <ul><li><code>myObject.startNotifications()</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This method can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.startNotifications()</code> </li></ul></li></ul>


<h3>stopNotifications()</h3>

<p>Stop listening push events.</p>

<h4>Parameters</h4>

<ul><li>callback : <span class='text-info'>CallBackHandler</span></li></ul>


<h4>Returns</h4>

<p>Synchronous Return:<ul><li>Void</li></ul></p>

<h4>Platforms</h4>

<ul>
<li>Javascript</li>
<li>Ruby</li>
<li>Android</li>
<li>iOS</li>
<li>Windows Embedded</li>
</ul>


<h4>Method Access:</h4>

<ul><li><i class="icon-file"></i>Instance Method: This method can be accessed via an instance object of this class: <ul><li><code>myObject.stopNotifications()</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This method can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.stopNotifications()</code> </li></ul></li></ul>


<h2>Properties</h2>

<h3>pushAppName</h3>

<h4>Type</h4>

<p><span class='text-info'>STRING</span> <span class='label'>Read Only</span></p>

<h4>Description</h4>

<p>Application name used by RhoConnect Push server to identify application.</p>

<h4>Access</h4>

<ul><li><i class="icon-file"></i>Instance: This property can be accessed via an instance object of this class: <ul><li><code>myObject.pushAppName</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This property can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.pushAppName</code> </li></ul></li></ul>


<h3>pushServer</h3>

<h4>Type</h4>

<p><span class='text-info'>STRING</span> <span class='label'>Read Only</span></p>

<h4>Description</h4>

<p>URL of RhoConnect Push server.</p>

<h4>Access</h4>

<ul><li><i class="icon-file"></i>Instance: This property can be accessed via an instance object of this class: <ul><li><code>myObject.pushServer</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This property can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.pushServer</code> </li></ul></li></ul>


<h3>type</h3>

<h4>Type</h4>

<p><span class='text-info'>STRING</span> <span class='label'>Read Only</span></p>

<h4>Description</h4>

<p>Push engine type.</p>

<h4>Values</h4>

<p><strong>Possible Values</strong> (<span class='text-info'>STRING</span>):</p>

<ul>
<li>Constant: Rho.Push.PUSH_TYPE_RHOCONNECT

<ul>
<li>String: rhoconnect-push</li>
<li><p>RhoConnect push engine.</p></li>
</ul>
</li>
<li>Constant: Rho.Push.PUSH_TYPE_NATIVE

<ul>
<li>String: native-push</li>
<li><p>Native push engine (like GCM on Android).</p>

<h4>Access</h4></li>
</ul>
</li>
</ul>


<ul><li><i class="icon-file"></i>Instance: This property can be accessed via an instance object of this class: <ul><li><code>myObject.type</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This property can be accessed via the default instance object of this class. <ul><li><code>Rho.Push.type</code> </li></ul></li></ul>


<h3><span class="text-error">userNotifyMode</span></h3>

<h4>Type</h4>

<p><span class='text-info'>STRING</span></p>

<h4>Description</h4>

<p><span class='label label-important'>Deprecated</span>
UI notification mode. Use <code>Rho.Notification</code> instead.</p>

<h4>Params</h4>

<p><strong>Default:</strong> backgroundNotifications</p>


<h4>Values</h4>

<p><strong>Possible Values</strong> (<span class='text-info'>STRING</span>):</p>

<ul>
<li>Constant: Rho.Push.PUSH_NOTIFY_NONE

<ul>
<li>String: none</li>
<li><p>Do not notify user about received push messages.</p></li>
</ul>
</li>
<li>Constant: Rho.Push.PUSH_NOTIFY_ALERTS

<ul>
<li>String: alert</li>
<li><p>Notify user with alerts inside of application UI only.</p></li>
</ul>
</li>
<li>Constant: Rho.Push.PUSH_NOTIFY_NOTIFICATIONS

<ul>
<li>String: notification</li>
<li><p>Notify user using notification bar.</p></li>
</ul>
</li>
<li>Constant: Rho.Push.PUSH_NOTIFY_NOTIFICATIONS_AND_ALERTS

<ul>
<li>String: backgroundNotifications</li>
<li><p>Notify user using notification bar if in background and with alerts in foreground.</p>

<h4>Access</h4></li>
</ul>
</li>
</ul>


<ul><li><i class="icon-file"></i>Instance: This property can be accessed via an instance object of this class: <ul><li><code>myObject.userNotifyMode</code></li></ul></li><li><i class="icon-file"></i>Default Instance: This property can be accessed via the default instance object of this class. <ul></ul></li></ul>


<h2>Examples</h2>

<h3>Handle push message</h3>

<p>Start Push Notifications service and define alert popup window in push callback method.</p>

<pre class='CodeRay'><code>

                                
function setupPush() {
  // Start listening for push messages. Parameter is an url to push_callback method
  Rho.Push.startNotifications(pushCallback);
}

function pushCallback(params) {
  // Show 'alert' popup window with push message text
  var propertyMap = {message: params["alert"], buttons: [{id: 'OK', title: 'OK'}]};
  Rho.Notification.showPopup(propertyMap);
}
                                
                            
</code></pre>

